(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f337f8aa"],{4656:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("AdminDishForm",{attrs:{"initial-dish":t.dish,"is-processing":t.isProcessing},on:{"after-submit":t.handleAfterSubmit}})],1)},s=[],r=a("e066"),n={components:{AdminDishForm:r["a"]},data:function(){return{dish:{name:"",CategoryId:"",price:"",tags:[],description:"",image:""},isProcessing:!1}},computed:{},created:function(){},methods:{}},o=n,c=a("2877"),d=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=d.exports},"9b2a":function(t,e,a){"use strict";a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d");var i=a("2fa3");e["a"]={categories:{get:function(){return i["a"].get("/categories")}},dishes:{get:function(t){var e=t.categoryId,a=new URLSearchParams({categoryId:e});return i["a"].get("/dishes?".concat(a.toString()))}},user:{get:function(t){var e=t.phone,a=new URLSearchParams({phone:e});return i["a"].get("/searchUser?".concat(a.toString()))}},list:{post:function(t){var e=t.dishes,a=t.UserId,s=t.tableNum,r=t.isTakingAway,n=t.memo,o=t.quantity,c=t.amount;return i["a"].post("/orders",{dishes:e,UserId:a,tableNum:s,isTakingAway:r,memo:n,quantity:o,amount:c})}}}},e066:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h1",{staticClass:"text-center my-2"},[t._v("新增菜單")]),a("form",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"row",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"name"}},[t._v("餐點名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dish.name,expression:"dish.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"Enter name",required:""},domProps:{value:t.dish.name},on:{input:function(e){e.target.composing||t.$set(t.dish,"name",e.target.value)}}})]),a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"categoryId"}},[t._v("類型")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.dish.CategoryId,expression:"dish.CategoryId"}],staticClass:"form-control",attrs:{id:"categoryId",name:"categoryId",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.dish,"CategoryId",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.categories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),t._l(t.allTags,(function(e){return a("div",{key:e.id,staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dish.tags,expression:"dish.tags"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.dish.tags)?t._i(t.dish.tags,e.id)>-1:t.dish.tags},on:{change:function(a){var i=t.dish.tags,s=a.target,r=!!s.checked;if(Array.isArray(i)){var n=e.id,o=t._i(i,n);s.checked?o<0&&t.$set(t.dish,"tags",i.concat([n])):o>-1&&t.$set(t.dish,"tags",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.dish,"tags",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:e.id}},[t._v(t._s(e.name))])])})),a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"price"}},[t._v("價格")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dish.price,expression:"dish.price"}],staticClass:"form-control",attrs:{id:"price",type:"number",name:"price"},domProps:{value:t.dish.price},on:{input:function(e){e.target.composing||t.$set(t.dish,"price",e.target.value)}}})]),a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"description"}},[t._v("說明")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dish.description,expression:"dish.description"}],staticClass:"form-control",attrs:{id:"description",rows:"3",name:"description"},domProps:{value:t.dish.description},on:{input:function(e){e.target.composing||t.$set(t.dish,"description",e.target.value)}}})]),a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"image"}},[t._v("相片")]),t.dish.image?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.dish.image,width:"200",height:"200"}}):t._e(),a("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:t.handleFileChange}})]),a("button",{staticClass:"btn btn-primary col-6",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(t._s(this.isProcessing?"處理中...":"送出"))])],2)])},s=[],r=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("9b2a")),n=a("ff4b"),o={props:{initialDish:{type:Object,default:function(){return{name:"",CategoryId:"",price:"",tags:[],description:"",image:""}}},isProcessing:{type:Boolean,default:!1}},data:function(){return{dish:{name:"",CategoryId:"",price:"",tags:[],description:"",image:""},categories:[],allTags:[],isLoading:!0}},computed:{},created:function(){this.fetchCategories(),this.fetchTags()},methods:{fetchCategories:function(){var t,e,a;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,regeneratorRuntime.awrap(r["a"].categories.get());case 3:if(t=i.sent,e=t.data,a=t.statusText,"OK"===a){i.next=7;break}throw new Error(a);case 7:this.categories=e,this.isLoading=!1,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](0),console.log("error",i.t0);case 14:case"end":return i.stop()}}),null,this,[[0,11]])},fetchTags:function(){var t,e,a;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,regeneratorRuntime.awrap(n["a"].tag.get());case 3:if(t=i.sent,e=t.data,a=t.statusText,"OK"===a){i.next=7;break}throw new Error(a);case 7:this.allTags=e,i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](0),console.log("error",i.t0);case 13:case"end":return i.stop()}}),null,this,[[0,10]])},handleFileChange:function(t){var e=t.target.files;if(e.length){var a=window.URL.createObjectURL(e[0]);this.dish.image=a}},handleSubmit:function(){this.dish.name?this.dish.CategoryId?this.$emit("after-submit",this.dish):this.$swal({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,type:"warning",title:"請選擇餐點類別",text:""}):this.$swal({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,type:"warning",title:"請填寫餐點名稱",text:""})}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);e["a"]=u.exports},ff4b:function(t,e,a){"use strict";a("b0c0"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d");var i=a("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={dish:{get:function(t){var e=new URLSearchParams(t);return i["a"].get("/dishes?".concat(e.toString()))},post:function(t){return i["a"].post("/dishes",t)},put:function(t){var e=t.dishId,a=t.formData;return i["a"].put("/dishes/".concat(e),a)},delete:function(t){return i["a"].delete("/dishes/".concat(t))}},category:{get:function(){return i["a"].get("/categories",{headers:{Authorization:"Bearer ".concat(s())}})},post:function(t){return i["a"].post("/categories",t)},put:function(t){var e=t.categoryId,a=t.name;return i["a"].put("/categories/".concat(e),{name:a})},delete:function(t){return i["a"].delete("/categories/".concat(t))}},tag:{get:function(){return i["a"].get("/tags",{headers:{Authorization:"Bearer ".concat(s())}})},post:function(t){return i["a"].post("/tags",t)},put:function(t){var e=t.categoryId,a=t.name;return i["a"].put("/tags/".concat(e),{name:a})},delete:function(t){return i["a"].delete("/tags/".concat(t))}}}}}]);
//# sourceMappingURL=chunk-f337f8aa.8f1cf711.js.map