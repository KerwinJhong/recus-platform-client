(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36c79406"],{"0145":function(t,e,s){"use strict";var r=s("767a"),a=s.n(r);a.a},"1e9a":function(t,e,s){},4557:function(t,e,s){},"4cd3":function(t,e,s){"use strict";var r=s("4557"),a=s.n(r);a.a},5115:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row fixed-bottom"},[s("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"order"}}},[s("p",[t._v("店內點餐")])]),s("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"day-orders"}}},[s("p",[t._v("當日訂單")])]),s("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"memberseach"}}},[s("p",[t._v("會員管理")])]),s("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"manage-dishes"}}},[s("p",[t._v("菜單管理")])])],1)},a=[],i={methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}},n=i,o=(s("0145"),s("2877")),c=Object(o["a"])(n,r,a,!1,null,"770e8c05",null);e["a"]=c.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var r=s("1d80"),a=s("5899"),i="["+a+"]",n=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(t){return function(e){var s=String(r(e));return 1&t&&(s=s.replace(n,"")),2&t&&(s=s.replace(o,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,s){var r=s("861d"),a=s("d2bb");t.exports=function(t,e,s){var i,n;return a&&"function"==typeof(i=e.constructor)&&i!==s&&r(n=i.prototype)&&n!==s.prototype&&a(t,n),t}},"763c":function(t,e,s){"use strict";var r=s("e5bc"),a=s.n(r);a.a},"767a":function(t,e,s){},8229:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"text-right"},[r("h1",{staticClass:"d-inline float-left"},[t._v(t._s(this.initialTitle))]),r("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("儀錶板")]),r("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("未製作(N)")]),r("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("未結帳(N)")]),[r("router-link",{staticClass:"mr-3",attrs:{to:"#"}},[r("img",{staticClass:"userImg",attrs:{src:s("a7d1"),alt:""}})]),r("button",{staticClass:"btn btn-sm btn-warning my-2 my-sm-0",attrs:{type:"button"},on:{click:t.logout}},[t._v("登出")])]],2)},a=[],i={props:{initialTitle:{type:String}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}},n=i,o=(s("b04d"),s("2877")),c=Object(o["a"])(n,r,a,!1,null,"66a8aaa2",null);e["a"]=c.exports},"9b2a":function(t,e,s){"use strict";s("d3b7"),s("25f0"),s("3ca3"),s("ddb0"),s("2b3d");var r=s("2fa3");e["a"]={categories:{get:function(){return r["a"].get("/categories")}},dishes:{get:function(t){var e=t.categoryId,s=new URLSearchParams({categoryId:e});return r["a"].get("/dishes?".concat(s.toString()))}},user:{get:function(t){var e=t.phone,s=new URLSearchParams({phone:e});return r["a"].get("/searchUser?".concat(s.toString()))}},list:{post:function(t){var e=t.dishes,s=t.UserId,a=t.tableNum,i=t.isTakingAway,n=t.memo,o=t.quantity,c=t.amount;return r["a"].post("/orders",{dishes:e,UserId:s,tableNum:a,isTakingAway:i,memo:n,quantity:o,amount:c})}}}},a7d1:function(t,e,s){t.exports=s.p+"img/Logo.34d21c2a.jpg"},a9e3:function(t,e,s){"use strict";var r=s("83ab"),a=s("da84"),i=s("94ca"),n=s("6eeb"),o=s("5135"),c=s("c6b6"),u=s("7156"),l=s("c04e"),h=s("d039"),d=s("7c73"),p=s("241c").f,f=s("06cf").f,m=s("9bf2").f,b=s("58a8").trim,v="Number",g=a[v],y=g.prototype,w=c(d(y))==v,O=function(t){var e,s,r,a,i,n,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(s=u.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),n=i.length,o=0;o<n;o++)if(c=i.charCodeAt(o),c<48||c>a)return NaN;return parseInt(i,r)}return+u};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,C=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof C&&(w?h((function(){y.valueOf.call(s)})):c(s)!=v)?u(new g(O(e)),s,C):O(e)},D=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;D.length>k;k++)o(g,x=D[k])&&!o(C,x)&&m(C,x,f(g,x));C.prototype=y,y.constructor=C,n(a,v,C)}},b04d:function(t,e,s){"use strict";var r=s("1e9a"),a=s.n(r);a.a},b6b4:function(t,e,s){"use strict";var r=s("bcbc"),a=s.n(r);a.a},bcbc:function(t,e,s){},cf2a:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavbarTop",{attrs:{"initial-title":t.title}}),s("div",{staticClass:"row",staticStyle:{height:"100%"}},[s("div",{staticClass:"col-8 border border-dark p-0",staticStyle:{height:"calc(100vh - 107px)"}},[s("div",{},[s("MealTabs",{attrs:{user:t.user},on:{"after-search-user":t.afterSearchUser}}),s("Meal",{attrs:{"initial-dishes":t.dishes},on:{"after-add-to-order":t.afterAddToOrder,"after-add-user":t.afterAddUser}})],1)]),s("div",{staticClass:"col-4 border border-dark p-0",staticStyle:{height:"calc(100vh - 107px)"}},[s("List",{attrs:{"add-dishes":t.addDishes},on:{"after-delete-dish":t.afterDeleteDish,"after-submit-order":t.aftersubmitorder}})],1)]),s("NavbarBottm")],1)},a=[],i=(s("4de4"),s("b0c0"),s("a9e3"),s("d3b7"),s("96cf"),s("8229")),n=s("5115"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("ul",{staticClass:"nav nav-pills my-2"},t._l(t.categories,(function(e){return s("li",{key:e.id,staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"order",query:{categoryId:e.id}}}},[t._v(t._s(e.name))])],1)})),0),s("div",{staticClass:"row border border-warning meal"},t._l(t.dishes,(function(e){return s("div",{key:e.id,staticClass:"col-lg-4 col-xl-3 dish border border-dark",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addToList(e.id,e.name,e.price)}}},[s("h5",{staticClass:"dishName"},[t._v(t._s(e.name))]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-auto mr-auto px-0"},[s("span",[t._v("價格："+t._s(e.price))])]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:{}}},[t._v("說明")])],1)])})),0)])},c=[],u=(s("a4d3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),l=s("9b2a");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){Object(u["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={props:{initialDishes:{type:Array}},data:function(){return{userPhone:"",userName:"",dishId:0,isProcessing:!1,categories:[],dishes:this.initialDishes}},methods:{fetchCategories:function(){var t,e,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(l["a"].categories.get());case 3:if(t=r.sent,e=t.data,s=t.statusText,"OK"===s){r.next=7;break}throw new Error(s);case 7:this.categories=e,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log("error",r.t0);case 13:case"end":return r.stop()}}),null,this,[[0,10]])},searchUser:function(){var t,e,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,this.processing=!0,r.next=4,regeneratorRuntime.awrap(l["a"].user.get({phone:this.userPhone}));case 4:if(t=r.sent,e=t.data,s=t.statusText,"OK"===s){r.next=8;break}throw new Error(s);case 8:void 0===e.name?this.$swal({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,type:"warning",title:"未找到會員",text:""}):(this.$emit("after-add-user",{name:e.phone}),this.userName=e.name,this.isProcessing=!1),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),this.isProcessing=!1,console.log("error",r.t0);case 15:case"end":return r.stop()}}),null,this,[[0,11]])},addToList:function(t,e,s){var r=this;this.$swal.fire({title:"<h1>請選擇數量</h1>",type:"info",input:"number",html:"",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:'<i class="fa fa-thumbs-up"></i> 確認',cancelButtonText:'<i class="fa fa-thumbs-down"></i> 返回'}).then((function(a){+a.value>0?(r.$emit("after-add-to-order",{id:t,name:e,price:s,quantity:a.value}),r.$swal({type:"success",title:"成功新增餐點"})):r.$swal({type:"warning",title:"未新增餐點"})}))}},created:function(){this.fetchCategories()},watch:{initialDishes:function(t){this.dishes={},this.dishes=d({},this.dishes,{},t)}}},f=p,m=(s("763c"),s("2877")),b=Object(m["a"])(f,o,c,!1,null,"80f477f4",null),v=b.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-2"},[t._m(0),s("div",[s("p",{staticClass:"d-inline-block mb-0 mr-3"},[t._v(t._s(this.user.name||"userName"))]),s("form",{staticClass:"form-inline my-2 my-lg-0 d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userPhone,expression:"userPhone"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",value:"",placeholder:"09xxxxxxxx"},domProps:{value:t.userPhone},on:{input:function(e){e.target.composing||(t.userPhone=e.target.value)}}}),s("button",{staticClass:"btn btn-outline-success my-2 my-sm-0",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.searchUser(e)}}},[t._v("Search")])])])])])},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-auto mr-auto px-0"},[s("button",[t._v("推薦區")]),s("button",[t._v("菜單區")])])}];function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function O(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){Object(u["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var x={props:{user:{type:Object}},data:function(){return{userData:this.user,userPhone:this.user.temp,userName:this.user.name}},methods:{searchUser:function(){this.$emit("after-search-user",this.userPhone)}},watch:{user:function(t){this.userData=O({},this.userData,{},t)}}},C=x,D=(s("b6b4"),Object(m["a"])(C,g,y,!1,null,"ef6614b4",null)),k=D.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row my-2"},[s("h5",{staticClass:"col-auto mr-auto px-0"},[t._v("清單")]),s("h5",{staticClass:"col-auto"},[t._v("總數："+t._s(this.addDishes.quantity)+"件")])]),s("div",{staticClass:"border border-warning list"},t._l(this.addDishes.list,(function(e){return s("div",{key:e.id,staticClass:"dish border border-dark rounded-lg"},[s("h5",{staticClass:"mb-1"},[t._v(t._s(e.name))]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-auto mr-auto px-0"},[s("span",[t._v("數量："+t._s(e.quantity))])]),s("button",{staticClass:"btn btn-primary",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.handleDeleteButtonClick(e.id,e.quantity,e.price)}}},[t._v("刪除")])])])})),0),s("h5",{staticClass:"my-2"},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.memo,expression:"memo"}],staticClass:"w-100",attrs:{name:"memo",id:"",rows:"3"},domProps:{value:t.memo},on:{input:function(e){e.target.composing||(t.memo=e.target.value)}}}),s("div",{staticClass:"row my-2"},[s("button",{staticClass:"btn btn-primary col py-2",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.tableNumber(e)}}},[t._v("內用")]),s("button",{staticClass:"btn btn-primary col py-2",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.takingAway(e)}}},[t._v("外帶")]),s("button",{directives:[{name:"show",rawName:"v-show",value:this.tableNum>0||this.isTakingAway>0,expression:"this.tableNum>0 || this.isTakingAway>0"}],staticClass:"btn btn-primary col py-2",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submitOrder(e)}}},[t._v("新增")])]),s("h5",{staticClass:"text-right"},[t._v("金額："+t._s(this.addDishes.amount)+"元")])])},N=[];function P(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function j(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?P(Object(s),!0).forEach((function(e){Object(u["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var T={props:{addDishes:{}},data:function(){return{dishesData:this.addDishes,tableNum:0,isTakingAway:0,memo:"",quantity:0,amount:0}},created:function(){},methods:{handleDeleteButtonClick:function(t,e,s){this.addDishes.quantity=Number(this.addDishes.quantity)-Number(e),this.addDishes.amount=this.addDishes.amount-s*e,this.$emit("after-delete-dish",t)},tableNumber:function(){var t=this;this.$swal.fire({title:"<h1>請輸入桌號</h1>",type:"info",input:"number",html:"",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:'<i class="fa fa-thumbs-up"></i> 確認',cancelButtonText:'<i class="fa fa-thumbs-down"></i> 返回'}).then((function(e){+e.value>0?(t.isTakingAway=0,t.tableNum=+e.value,t.$swal({type:"success",title:"成功新增桌號"})):t.$swal({type:"warning",title:"未新增桌號"})}))},takingAway:function(){this.isTakingAway=1,this.tableNum=0,this.$swal({type:"success",title:"已選擇外帶"})},submitOrder:function(){var t,e;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,0!==this.addDishes.list.length){s.next=3;break}throw new Error(e);case 3:return s.next=5,regeneratorRuntime.awrap(l["a"].list.post({dishes:this.addDishes.list,UserId:this.addDishes.user,tableNum:this.tableNum,isTakingAway:this.isTakingAway,memo:this.memo,quantity:this.addDishes.quantity,amount:this.addDishes.amount}));case 5:if(t=s.sent,t.data,e=t.statusText,"OK"===e){s.next=9;break}throw new Error(e);case 9:this.$emit("after-submit-order"),this.tableNum=0,this.isTakingAway=0,this.memo="",this.$swal({type:"success",title:"成功新增清單"}),s.next=20;break;case 16:s.prev=16,s.t0=s["catch"](0),this.$swal({type:"warning",title:"未新增清單"}),console.log("error",s.t0);case 20:case"end":return s.stop()}}),null,this,[[0,16]])}},watch:{addDishes:function(t){this.dishesData=j({},this.dishesData,{},t)}}},E=T,I=(s("4cd3"),Object(m["a"])(E,_,N,!1,null,"6bed8ecc",null)),A=I.exports,$={components:{NavbarTop:i["a"],NavbarBottm:n["a"],Meal:v,List:A,MealTabs:k},data:function(){return{title:"店內點餐",dishes:[],addDishes:{list:[],user:"",quantity:0,amount:0},user:{name:"",phone:""}}},created:function(){var t=this.$route.query.categoryId,e=void 0===t?1:t;this.fetchDishes({categoryId:e})},beforeRouteUpdate:function(t,e,s){var r=t.query.categoryId,a=void 0===r?1:r;this.fetchDishes({categoryId:a}),s()},methods:{fetchDishes:function(t){var e,s,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(l["a"].dishes.get(t));case 3:if(e=a.sent,s=e.data,r=e.statusText,"OK"===r){a.next=7;break}throw new Error(r);case 7:this.dishes=s,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),this.$swal({type:"warning",title:"無法取得資料，請稍後再試"}),console.log("error",a.t0);case 14:case"end":return a.stop()}}),null,this,[[0,10]])},afterDeleteDish:function(t){this.addDishes.list=this.addDishes.list.filter((function(e){return e.id!==t}))},afterAddToOrder:function(t){var e=t.id,s=t.name,r=t.price,a=t.quantity;this.addDishes.list.push({id:e,name:s,price:r,quantity:a}),this.addDishes.quantity=Number(this.addDishes.quantity)+Number(a),this.addDishes.amount=this.addDishes.amount+r*a},afterAddUser:function(t){this.addDishes.user=t.name},aftersubmitorder:function(){this.addDishes={list:[],user:"",quantity:0,amount:0},this.user.name="",this.user.temp=""},afterSearchUser:function(t){var e,s,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(l["a"].user.get({phone:t}));case 3:if(e=a.sent,s=e.data,r=e.statusText,"OK"===r){a.next=7;break}throw new Error(r);case 7:void 0===s.name?this.$swal({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,type:"warning",title:"未找到會員",text:""}):(this.addDishes.user=s.id,this.user={name:s.name,phone:""}),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log("error",a.t0);case 13:case"end":return a.stop()}}),null,this,[[0,10]])}}},S=$,q=Object(m["a"])(S,r,a,!1,null,null,null);e["default"]=q.exports},e5bc:function(t,e,s){}}]);
//# sourceMappingURL=chunk-36c79406.c15bed9d.js.map