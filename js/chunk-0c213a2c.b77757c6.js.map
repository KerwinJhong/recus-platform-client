{"version":3,"sources":["webpack:///./src/views/AdminDishNew.vue?3b43","webpack:///src/views/AdminDishNew.vue","webpack:///./src/views/AdminDishNew.vue?b40e","webpack:///./src/views/AdminDishNew.vue","webpack:///./src/apis/order.js","webpack:///./src/components/AdminDishForm.vue?125d","webpack:///src/components/AdminDishForm.vue","webpack:///./src/components/AdminDishForm.vue?a803","webpack:///./src/components/AdminDishForm.vue","webpack:///./src/apis/manage.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isProcessing","on","handleAfterSubmit","staticRenderFns","components","AdminDishForm","data","computed","created","methods","component","categories","get","apiHelper","dishes","categoryId","searchParams","URLSearchParams","toString","user","phone","list","post","UserId","tableNum","isTakingAway","memo","quantity","amount","_v","directives","name","rawName","value","isLoading","expression","$event","stopPropagation","preventDefault","handleSubmit","dish","domProps","target","composing","$set","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","category","key","id","_s","tag","isArray","tags","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","image","_e","handleFileChange","props","initialDish","type","Object","default","Boolean","CategoryId","price","description","allTags","fetchCategories","fetchTags","files","length","imageURL","$emit","$swal","toast","position","showConfirmButton","timer","title","text","getToken","localStorage","getItem","orderId","formData","put","dishId","delete","headers","Authorization","TagId"],"mappings":"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","file":"js/chunk-0c213a2c.b77757c6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('AdminDishForm',{attrs:{\"is-processing\":_vm.isProcessing},on:{\"after-submit\":_vm.handleAfterSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <AdminDishForm :is-processing=\"isProcessing\" @after-submit=\"handleAfterSubmit\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminDishForm from \"./../components/AdminDishForm\";\r\nimport manageAPI from \"./../apis/manage\";\r\n\r\nexport default {\r\n  components: {\r\n    AdminDishForm\r\n  },\r\n  data() {\r\n    return {\r\n      isProcessing: false\r\n    };\r\n  },\r\n  computed: {},\r\n  created() {},\r\n  methods: {\r\n    async handleAfterSubmit(formData) {\r\n      try {\r\n        this.isProcessing = true;\r\n        const { data, statusText } = await manageAPI.dish.post(formData);\r\n        if (statusText !== \"OK\" || data.status !== \"success\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        this.$router.push({\r\n          name: \"manage-dishes\",\r\n          query: { categoryId: formData.CategoryId }\r\n        });\r\n        this.$swal({\r\n          toast: true,\r\n          position: \"top\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n          type: \"success\",\r\n          title: \"成功建立菜單\",\r\n          text: \"\"\r\n        });\r\n      } catch (error) {\r\n        this.isProcessing = false;\r\n        this.$swal({\r\n          toast: true,\r\n          position: \"top\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n          type: \"warning\",\r\n          title: \"建立菜單失敗，請稍後再試\",\r\n          text: \"\"\r\n        });\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDishNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDishNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminDishNew.vue?vue&type=template&id=17b50ce5&\"\nimport script from \"./AdminDishNew.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminDishNew.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from './../utils/helpers'\r\n\r\nexport default {\r\n  categories: {\r\n    get() {\r\n      return apiHelper.get('/categories')\r\n    }\r\n  },\r\n  dishes: {\r\n    get({ categoryId }) {\r\n      const searchParams = new URLSearchParams({ categoryId })\r\n      return apiHelper.get(`/dishes?${searchParams.toString()}`)\r\n    }\r\n  },\r\n  user: {\r\n    get({ phone }) {\r\n      const searchParams = new URLSearchParams({ phone })\r\n      return apiHelper.get(`/searchUser?${searchParams.toString()}`)\r\n    }\r\n  },\r\n  list: {\r\n    post({ dishes, UserId, tableNum, isTakingAway, memo, quantity, amount }) {\r\n      return apiHelper.post(`/orders`, { dishes, UserId, tableNum, isTakingAway, memo, quantity, amount })\r\n    }\r\n  }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('h1',{staticClass:\"text-center my-2\"},[_vm._v(\"新增菜單\")]),_c('form',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"row\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group col-6\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"餐點名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dish.name),expression:\"dish.name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"placeholder\":\"Enter name\",\"required\":\"\"},domProps:{\"value\":(_vm.dish.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dish, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{attrs:{\"for\":\"categoryId\"}},[_vm._v(\"類型\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dish.CategoryId),expression:\"dish.CategoryId\"}],staticClass:\"form-control\",attrs:{\"id\":\"categoryId\",\"name\":\"categoryId\",\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.dish, \"CategoryId\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\",\"selected\":\"\",\"disabled\":\"\"}},[_vm._v(\"--請選擇--\")]),_vm._l((_vm.categories),function(category){return _c('option',{key:category.id,domProps:{\"value\":category.id}},[_vm._v(_vm._s(category.name))])})],2)]),_vm._l((_vm.allTags),function(tag){return _c('div',{key:tag.id,staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dish.tags),expression:\"dish.tags\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"id\":tag.id},domProps:{\"value\":tag.id,\"checked\":Array.isArray(_vm.dish.tags)?_vm._i(_vm.dish.tags,tag.id)>-1:(_vm.dish.tags)},on:{\"change\":function($event){var $$a=_vm.dish.tags,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=tag.id,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.dish, \"tags\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.dish, \"tags\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.dish, \"tags\", $$c)}}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":tag.id}},[_vm._v(_vm._s(tag.name))])])}),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{attrs:{\"for\":\"price\"}},[_vm._v(\"價格\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dish.price),expression:\"dish.price\"}],staticClass:\"form-control\",attrs:{\"id\":\"price\",\"type\":\"number\",\"name\":\"price\"},domProps:{\"value\":(_vm.dish.price)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dish, \"price\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{attrs:{\"for\":\"description\"}},[_vm._v(\"說明\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dish.description),expression:\"dish.description\"}],staticClass:\"form-control\",attrs:{\"id\":\"description\",\"rows\":\"3\",\"name\":\"description\"},domProps:{\"value\":(_vm.dish.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dish, \"description\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"相片\")]),(_vm.dish.image)?_c('img',{staticClass:\"d-block img-thumbnail mb-3\",attrs:{\"src\":_vm.dish.image,\"width\":\"200\",\"height\":\"200\"}}):_vm._e(),_c('input',{staticClass:\"form-control-file\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileChange}})]),_c('button',{staticClass:\"btn btn-primary col-6\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(_vm._s(this.isProcessing ? \"處理中...\" : \"送出\"))])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class>\r\n    <h1 class=\"text-center my-2\">新增菜單</h1>\r\n    <form class=\"row\" v-show=\"!isLoading\" @submit.stop.prevent=\"handleSubmit\">\r\n      <div class=\"form-group col-6\">\r\n        <label for=\"name\">餐點名稱</label>\r\n        <input\r\n          id=\"name\"\r\n          v-model=\"dish.name\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          name=\"name\"\r\n          placeholder=\"Enter name\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group col-6\">\r\n        <label for=\"categoryId\">類型</label>\r\n        <select\r\n          id=\"categoryId\"\r\n          v-model=\"dish.CategoryId\"\r\n          class=\"form-control\"\r\n          name=\"categoryId\"\r\n          required\r\n        >\r\n          <option value selected disabled>--請選擇--</option>\r\n          <option\r\n            v-for=\"category in categories\"\r\n            :key=\"category.id\"\r\n            :value=\"category.id\"\r\n          >{{ category.name }}</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"form-check form-check-inline\" v-for=\"tag in allTags\" :key=\"tag.id\">\r\n        <input\r\n          class=\"form-check-input\"\r\n          type=\"checkbox\"\r\n          :id=\"tag.id\"\r\n          v-model=\"dish.tags\"\r\n          :value=\"tag.id\"\r\n        />\r\n        <label class=\"form-check-label\" :for=\"tag.id\">{{ tag.name }}</label>\r\n      </div>\r\n\r\n      <div class=\"form-group col-6\">\r\n        <label for=\"price\">價格</label>\r\n        <input id=\"price\" v-model=\"dish.price\" type=\"number\" class=\"form-control\" name=\"price\" />\r\n      </div>\r\n\r\n      <div class=\"form-group col-6\">\r\n        <label for=\"description\">說明</label>\r\n        <textarea\r\n          id=\"description\"\r\n          v-model=\"dish.description\"\r\n          class=\"form-control\"\r\n          rows=\"3\"\r\n          name=\"description\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group col-6\">\r\n        <label for=\"image\">相片</label>\r\n        <img\r\n          v-if=\"dish.image\"\r\n          :src=\"dish.image\"\r\n          class=\"d-block img-thumbnail mb-3\"\r\n          width=\"200\"\r\n          height=\"200\"\r\n        />\r\n\r\n        <input\r\n          id=\"image\"\r\n          type=\"file\"\r\n          name=\"image\"\r\n          accept=\"image/*\"\r\n          class=\"form-control-file\"\r\n          @change=\"handleFileChange\"\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-primary col-6\"\r\n        :disabled=\"isProcessing\"\r\n      >{{ this.isProcessing ? \"處理中...\" : \"送出\" }}</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport orderAPI from \"./../apis/order\";\r\nimport manageAPI from \"./../apis/manage\";\r\n\r\nexport default {\r\n  props: {\r\n    initialDish: {\r\n      type: Object,\r\n      default: () => ({\r\n        name: \"\",\r\n        CategoryId: \"\",\r\n        price: \"\",\r\n        tags: [],\r\n        description: \"\",\r\n        image: \"\"\r\n      })\r\n    },\r\n    isProcessing: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dish: {\r\n        name: \"\",\r\n        CategoryId: \"\",\r\n        price: \"\",\r\n        tags: [],\r\n        description: \"\",\r\n        image: \"\"\r\n      },\r\n      categories: [],\r\n      allTags: [],\r\n      isLoading: true\r\n    };\r\n  },\r\n  computed: {},\r\n  created() {\r\n    this.fetchCategories();\r\n    this.fetchTags();\r\n  },\r\n  methods: {\r\n    async fetchCategories() {\r\n      try {\r\n        const response = await orderAPI.categories.get();\r\n        const { data, statusText } = response;\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n        this.categories = data;\r\n        this.isLoading = false;\r\n      } catch (error) {\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    },\r\n    async fetchTags() {\r\n      try {\r\n        const response = await manageAPI.tag.get();\r\n        const { data, statusText } = response;\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        this.allTags = data;\r\n      } catch (error) {\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    },\r\n    handleFileChange(e) {\r\n      const files = e.target.files;\r\n      if (!files.length) return; // 如果沒有檔案則離開此函式\r\n      // 否則產生預覽圖...\r\n      const imageURL = window.URL.createObjectURL(files[0]);\r\n      this.dish.image = imageURL;\r\n    },\r\n    handleSubmit() {\r\n      if (!this.dish.name) {\r\n        this.$swal({\r\n          toast: true,\r\n          position: \"top\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n          type: \"warning\",\r\n          title: \"請填寫餐點名稱\",\r\n          text: \"\"\r\n        });\r\n        return;\r\n      } else if (!this.dish.CategoryId) {\r\n        this.$swal({\r\n          toast: true,\r\n          position: \"top\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n          type: \"warning\",\r\n          title: \"請選擇餐點類別\",\r\n          text: \"\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.$emit(\"after-submit\", this.dish);\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDishForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDishForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminDishForm.vue?vue&type=template&id=56ef0561&\"\nimport script from \"./AdminDishForm.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminDishForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from './../utils/helpers'\r\nconst getToken = () => localStorage.getItem('token')\r\n\r\nexport default {\r\n  dish: {\r\n    get(orderId) {\r\n      const searchParams = new URLSearchParams(orderId)\r\n      return apiHelper.get(`/dishes?${searchParams.toString()}`)\r\n    },\r\n    post(formData) {\r\n      return apiHelper.post(`/dishes`, formData)\r\n    },\r\n    put({ dishId, formData }) {\r\n      return apiHelper.put(`/dishes/${dishId}`, formData)\r\n    },\r\n    delete(dishId) {\r\n      return apiHelper.delete(`/dishes/${dishId}`)\r\n    }\r\n  },\r\n  category: {\r\n    get() {\r\n      return apiHelper.get(`/categories`, {\r\n        headers: { Authorization: `Bearer ${getToken()}` }\r\n      })\r\n    },\r\n    post(name) {\r\n      return apiHelper.post(`/categories`, name)\r\n    },\r\n    put({ categoryId, name }) {\r\n      return apiHelper.put(`/categories/${categoryId}`, { name })\r\n    },\r\n    delete(TagId) {\r\n      return apiHelper.delete(`/categories/${TagId}`)\r\n    }\r\n  },\r\n  tag: {\r\n    get() {\r\n      return apiHelper.get(`/tags`, {\r\n        headers: { Authorization: `Bearer ${getToken()}` }\r\n      })\r\n    },\r\n    post(name) {\r\n      return apiHelper.post(`/tags`, name)\r\n    },\r\n    put({ categoryId, name }) {\r\n      return apiHelper.put(`/tags/${categoryId}`, { name })\r\n    },\r\n    delete(TagId) {\r\n      return apiHelper.delete(`/tags/${TagId}`)\r\n    }\r\n  }\r\n}"],"sourceRoot":""}