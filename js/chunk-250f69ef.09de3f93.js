(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-250f69ef"],{"0145":function(t,e,r){"use strict";var a=r("767a"),n=r.n(a);n.a},"1e9a":function(t,e,r){},"4e82":function(t,e,r){"use strict";var a=r("23e7"),n=r("1c0b"),s=r("7b0b"),i=r("d039"),o=r("b301"),c=[],u=c.sort,l=i((function(){c.sort(void 0)})),p=i((function(){c.sort(null)})),d=o("sort"),f=l||!p||d;a({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?u.call(s(this)):u.call(s(this),n(t))}})},5115:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row fixed-bottom"},[r("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"order"}}},[r("p",[t._v("店內點餐")])]),r("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"day-orders"}}},[r("p",[t._v("當日訂單")])]),r("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"memberseach"}}},[r("p",[t._v("會員管理")])]),r("router-link",{staticClass:"btn btn-primary col p-3",attrs:{to:{name:"manage-dishes"}}},[r("p",[t._v("菜單管理")])])],1)},n=[],s={methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}},i=s,o=(r("0145"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,"770e8c05",null);e["a"]=c.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),s="["+n+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var s,i;return n&&"function"==typeof(s=e.constructor)&&s!==r&&a(i=s.prototype)&&i!==r.prototype&&n(t,i),t}},"767a":function(t,e,r){},8229:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"text-right"},[a("h1",{staticClass:"d-inline float-left"},[t._v(t._s(this.initialTitle))]),a("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("儀錶板")]),a("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("未製作(N)")]),a("router-link",{staticClass:"mr-3",attrs:{to:"/"}},[t._v("未結帳(N)")]),[a("router-link",{staticClass:"mr-3",attrs:{to:"#"}},[a("img",{staticClass:"userImg",attrs:{src:r("a7d1"),alt:""}})]),a("button",{staticClass:"btn btn-sm btn-warning my-2 my-sm-0",attrs:{type:"button"},on:{click:t.logout}},[t._v("登出")])]],2)},n=[],s={props:{initialTitle:{type:String}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}},i=s,o=(r("b04d"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,"66a8aaa2",null);e["a"]=c.exports},"974e":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("NavbarTop",{attrs:{"initial-title":t.title}}),r("div",{staticClass:"row my-lg-4 my-xl-3"},[r("form",{staticClass:"form-inline my-2 my-lg-0 d-inline-block col-4",attrs:{action:"/search"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",name:"keyword",placeholder:"輸入手機電話..."},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),r("router-link",{attrs:{to:{name:"memberseach",query:{phone:t.phone}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("搜尋")])])],1),r("div",{staticClass:"d-inline-block col-4 d-flex justify-content-center"},[r("nav",{attrs:{"aria-label":"Page navigation example"}},[r("ul",{staticClass:"pagination mb-0"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",staticStyle:{"padding-top":"3px"},attrs:{"aria-label":"Previous",to:{name:"members",query:{page:t.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"members",query:{page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",staticStyle:{"padding-top":"3px"},attrs:{to:{name:"members",query:{page:t.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])]),r("div",{staticClass:"col-4"})]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("MemberTable",{attrs:{"initial-users":t.leftTableUsers}})],1),r("div",{staticClass:"col"},[r("MemberTable",{attrs:{"initial-users":t.rightTableUsers}})],1)]),r("NavbarBottm")],1)},n=[],s=(r("a4d3"),r("4de4"),r("d81d"),r("fb6a"),r("4e82"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("ade3")),i=(r("96cf"),r("8229")),o=r("5115"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"table table-striped table-bordered table-hover"},[t._m(0),r("tbody",t._l(t.users,(function(e){return r("tr",{key:e.id},[r("th",[r("router-link",{attrs:{to:{path:"/users",params:{id:e.id}}}},[t._v(t._s(e.account))])],1),r("td",[r("div",{staticClass:"user-name"},[t._v(t._s(e.phone))])]),r("td",[r("div",{staticClass:"user-name"},[t._v(t._s(e.consumeCount))])]),r("td",[r("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteUser(e.id)}}},[t._v("X")])]),r("td",[e.isSelf?t._e():r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.toggleIsAdmin(e.id)}}},[e.isAdmin?[t._v("管理員")]:[t._v("使用者")]],2)])])})),0)])},u=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",[t._v("Name")]),r("th",[t._v("手機")]),r("th",[t._v("消費次數")]),r("th",[t._v("刪除")]),r("th",[t._v("Action")])])])}],l=r("4cce");function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={props:{initialUsers:{type:Array}},data:function(){return{users:this.initialUsers}},methods:{deleteUser:function(t){var e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(l["a"].deleteUser({userId:t}));case 3:if(e=n.sent,r=e.data,a=e.statusText,"OK"===a){n.next=8;break}throw new Error(a);case 8:console.log("data",r),this.users=this.users.filter((function(e){return e.id!==t})),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](0),console.log("error",n.t0),this.$swal({type:"error",title:"無法將使用者移除，請稍後再試"});case 16:case"end":return n.stop()}}),null,this,[[0,12]])},toggleIsAdmin:function(t){var e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(l["a"].toggleAdmin({userId:t}));case 3:if(e=n.sent,r=e.data,a=e.statusText,"OK"===a&&"success"===r.status){n.next=8;break}throw new Error(a);case 8:this.users=this.users.map((function(e){return e.id!==t?e:d({},e,{isAdmin:!e.isAdmin})})),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](0),console.log("error",n.t0),this.$swal({type:"error",title:"無法切換使用者權限，請稍後再試"});case 15:case"end":return n.stop()}}),null,this,[[0,11]])}},watch:{initialUsers:function(t){this.users={},this.users=d({},this.users,{},t)}}},b=f,h=r("2877"),m=Object(h["a"])(b,c,u,!1,null,null,null),v=m.exports;function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var w={user:{id:1,account:"user1",phone:"0901",password:"12345678",name:"Nacho",email:"user1@example.com",image:"",isAdmin:!1,isValid:!0,createdAt:"2019-11-20T06:25:42.685Z",updatedAt:"2019-11-21T09:55:30.970Z",Orders:[{id:1},{id:2},{id:3}]}},_={components:{NavbarTop:i["a"],NavbarBottm:o["a"],MemberTable:v},data:function(){return{title:"會員管理",users:[],phone:void 0,totalPage:void 0,currentPage:1}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1},leftTableUsers:function(){return this.users.slice(0,7)},rightTableUsers:function(){return this.users.slice(7,14)}},created:function(){var t=this.$route.query.page;this.fetchProfiles({page:t})},beforeRouteUpdate:function(t,e,r){var a=t.query.page;this.fetchProfiles({page:a}),r()},methods:{fetchProfiles:function(t){var e,r,a,n,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.page,r=void 0===e?1:e,i.prev=1,i.next=4,regeneratorRuntime.awrap(l["a"].getMembers({page:r}));case 4:if(a=i.sent,n=a.data,s=a.statusText,"OK"===s){i.next=9;break}throw new Error(s);case 9:this.totalPage=n.totalPage,this.currentPage=n.currentPage,this.users=n.users.map((function(t){return t.id!==w.user.id?y({},t,{consumeCount:t.Orders.length}):y({},t,{consumeCount:t.Orders.length,isSelf:!0})})).sort((function(t,e){return Number(t.id)-Number(e.id)})),i.next=18;break;case 14:i.prev=14,i.t0=i["catch"](1),this.$swal({type:"error",title:"無法取得資料，請稍後再試"}),console.log("error",i.t0);case 18:case"end":return i.stop()}}),null,this,[[1,14]])}}},O=_,P=Object(h["a"])(O,a,n,!1,null,null,null);e["default"]=P.exports},a7d1:function(t,e,r){t.exports=r.p+"img/Logo.34d21c2a.jpg"},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("94ca"),i=r("6eeb"),o=r("5135"),c=r("c6b6"),u=r("7156"),l=r("c04e"),p=r("d039"),d=r("7c73"),f=r("241c").f,b=r("06cf").f,h=r("9bf2").f,m=r("58a8").trim,v="Number",g=n[v],y=g.prototype,w=c(d(y))==v,_=function(t){var e,r,a,n,s,i,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(s=u.slice(2),i=s.length,o=0;o<i;o++)if(c=s.charCodeAt(o),c<48||c>n)return NaN;return parseInt(s,a)}return+u};if(s(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var O,P=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof P&&(w?p((function(){y.valueOf.call(r)})):c(r)!=v)?u(new g(_(e)),r,P):_(e)},x=a?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;x.length>C;C++)o(g,O=x[C])&&!o(P,O)&&h(P,O,b(g,O));P.prototype=y,y.constructor=P,i(n,v,P)}},b04d:function(t,e,r){"use strict";var a=r("1e9a"),n=r.n(a);n.a},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,s=r("d039"),i=r("1dde"),o=i("map"),c=o&&!s((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));a({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,r){"use strict";var a=r("23e7"),n=r("861d"),s=r("e8b5"),i=r("23cb"),o=r("50c4"),c=r("fc6a"),u=r("8418"),l=r("1dde"),p=r("b622"),d=p("species"),f=[].slice,b=Math.max;a({target:"Array",proto:!0,forced:!l("slice")},{slice:function(t,e){var r,a,l,p=c(this),h=o(p.length),m=i(t,h),v=i(void 0===e?h:e,h);if(s(p)&&(r=p.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?n(r)&&(r=r[d],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return f.call(p,m,v);for(a=new(void 0===r?Array:r)(b(v-m,0)),l=0;m<v;m++,l++)m in p&&u(a,l,p[m]);return a.length=l,a}})}}]);
//# sourceMappingURL=chunk-250f69ef.09de3f93.js.map